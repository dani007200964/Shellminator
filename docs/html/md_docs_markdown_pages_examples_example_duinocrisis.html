<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>Shellminator: Duino Crisis Game</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/dani007200964/Shellminator" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shellminator
   &#160;<span id="projectnumber">V1.2.0</span>
   </div>
   <div id="projectbrief">Simple Terminal</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_markdown_pages_examples_example_duinocrisis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Duino Crisis Game </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="example_duinocrisis"></a> This is a simple game. It demonstrates an advanced use of the <a class="el" href="class_shellminator.html" title="Shellminator object.">Shellminator</a> library.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Created on Aug 10 2020</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2023 - Daniel Hajnal</span></div>
<div class="line"><span class="comment"> * hajnal.daniel96@gmail.com</span></div>
<div class="line"><span class="comment"> * This file is part of the Shellminator project.</span></div>
<div class="line"><span class="comment"> * Modified 2023.05.13</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * To test this example, you need a terminal emulator like PuTTY or Minicom.</span></div>
<div class="line"><span class="comment"> * This example shows a simple setup for Shellminator. It will create an</span></div>
<div class="line"><span class="comment"> * interactive interface, but it does not execute any command.</span></div>
<div class="line"><span class="comment"> * See Shellminator_execute example for further information.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_shellminator_8hpp.html">Shellminator.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_shellminator-_i_o_8hpp.html">Shellminator-IO.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The number of obstacles. I think 5 is more than enough.</span></div>
<div class="line"><span class="preprocessor">#define NUMBER_OF_OBSTACLES 5</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a Shellminator object, and initialize it to use Serial</span></div>
<div class="line"><a class="code hl_class" href="class_shellminator.html">Shellminator</a> shell( &amp;Serial );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Graphics pattern for the upper part of the floor.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> terrainUp[] = <span class="stringliteral">&quot;\\/ ~ ~ \\/ ~  \\/ ^  &quot;</span>;</div>
<div class="line">uint8_t terrainUpSize= <span class="keyword">sizeof</span>( terrainUp ) - 1;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Graphics pattern for the lower part of the floor.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> terrainDown[] = <span class="stringliteral">&quot;^ \\/ \\/  ^ \\/ ~  &quot;</span>;</div>
<div class="line">uint8_t terrainDownSize = <span class="keyword">sizeof</span>( terrainDown ) - 1;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Jump animation sequence. When the player jumps, these</span></div>
<div class="line"><span class="comment">// values will be added to the Y coordinate as offset.</span></div>
<div class="line">uint8_t jumpSequence[] = { 0, 1, 2, 3, 4, 5, 6, 7, 7, 7, 7, 7, 7, 7, 6, 5, 4, 3, 2, 1, 0};</div>
<div class="line">uint8_t jumpSequenceSize = <span class="keyword">sizeof</span>( jumpSequence );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This is a simple counter, that tracks the state of the jumping sequence.</span></div>
<div class="line"><span class="keywordtype">int</span> jumpSequenceCntr = 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This shows how many life left.</span></div>
<div class="line"><span class="keywordtype">int</span> playerLife = 3;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Streak counter. When the player jumps successfully 5 times in a row, one life will be added.</span></div>
<div class="line"><span class="keywordtype">int</span> streak = 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Graphics for the player.</span></div>
<div class="line"><span class="comment">// It has two elements for running animation.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* dinoRunningNormal[2] ={</div>
<div class="line">    <span class="stringliteral">&quot;            __\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;           / _)\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;    .-^^^-/ /\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot; __/       /\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;&lt;__.|_|-/ˇˇ&quot;</span></div>
<div class="line"> </div>
<div class="line">    ,</div>
<div class="line"> </div>
<div class="line">    <span class="stringliteral">&quot;            __\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;           / _)\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;    .-^^^-/ /\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot; __/       /\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;&lt;__./ˇˇ-|_|&quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Game over text.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* gameOverText{</div>
<div class="line">    <span class="stringliteral">&quot;+-------------+\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;|             |\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;|  GAME OVER  |\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;|             |\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;+-------------+\r\n&quot;</span></div>
<div class="line">    <span class="stringliteral">&quot;Score: &quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Difficulty select menu elements.</span></div>
<div class="line"><span class="keywordtype">char</span>* difficultyList[ 3 ] = {</div>
<div class="line">    (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Easy&quot;</span>,</div>
<div class="line">    (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Medium&quot;</span>,</div>
<div class="line">    (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Hard&quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Selected difficulty.</span></div>
<div class="line"><span class="keywordtype">int</span> difficulty = 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The difficulty increases runtime by distance to make the game challenging.</span></div>
<div class="line"><span class="comment">// This variable tracks the runtime difficulty.</span></div>
<div class="line"><span class="keywordtype">int</span> runtimeDifficulty;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The obstacle generator will use this value pairs.</span></div>
<div class="line"><span class="comment">// 0-th element is the easiest</span></div>
<div class="line"><span class="comment">// 11-th element is the hardest.</span></div>
<div class="line">uint8_t obstacleRandomRange[][ 2 ] = {</div>
<div class="line">    { 45, 60 },</div>
<div class="line">    { 40, 60 },</div>
<div class="line">    { 40, 55 },</div>
<div class="line">    { 40, 50 },</div>
<div class="line">    { 35, 50 },</div>
<div class="line">    { 30, 50 },</div>
<div class="line">    { 25, 45 },</div>
<div class="line">    { 20, 40 },</div>
<div class="line">    { 15, 35 },</div>
<div class="line">    { 15, 30 },</div>
<div class="line">    { 15, 25 },</div>
<div class="line">    { 15, 20 }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Graphics for the rock obstacle. I know, I know, it is ugly.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* rock{</div>
<div class="line">    <span class="stringliteral">&quot;/%%%\\&quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The width and height of the terminal will be stored here.</span></div>
<div class="line"><span class="keywordtype">int</span> width;</div>
<div class="line"><span class="keywordtype">int</span> height;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This variable tracks the distance from start. Basically it is the score.</span></div>
<div class="line"><span class="keywordtype">int</span> distance = 0;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will be called every time, when the up arrow key is pressed on the keyboard.</span></div>
<div class="line"><span class="keywordtype">void</span> upArrowFunc();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will be called every time, when the Ctrl+C key is pressed on the keyboard.</span></div>
<div class="line"><span class="comment">// It not works on the PC version, because Ctrl+C will terminate the application.</span></div>
<div class="line"><span class="keywordtype">void</span> abortKeyFunc();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will draw all the graphics elements.</span></div>
<div class="line"><span class="keywordtype">void</span> drawTerrain();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will draw the score, life and difficulty menus.</span></div>
<div class="line"><span class="keywordtype">void</span> drawScore();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This is a class for the obstacles.</span></div>
<div class="line"><span class="keyword">class </span>obstacle{</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Constructor. Basically it resets all the internal variables.</span></div>
<div class="line">    obstacle();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate a random position and type.</span></div>
<div class="line">    <span class="comment">// It shall be used for the first element after init.</span></div>
<div class="line">    <span class="keywordtype">void</span> generateManual();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate a random position automatically.</span></div>
<div class="line">    <span class="comment">// The previous obstacle must be set to use this function correctly.</span></div>
<div class="line">    <span class="keywordtype">void</span> generate();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Draw the obstacle to the screen.</span></div>
<div class="line">    <span class="keywordtype">void</span> draw();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The obstacles are stored in a circular like structure.</span></div>
<div class="line">    <span class="comment">// The first obstacle will &#39;die&#39; first, when it runs off the screen.</span></div>
<div class="line">    <span class="comment">// If it happens it will be generated after the last obstacle.</span></div>
<div class="line">    <span class="comment">// With this function you can set the order.</span></div>
<div class="line">    <span class="keywordtype">void</span> setPrevious( obstacle* prev );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Read the generated position.</span></div>
<div class="line">    <span class="keywordtype">int</span> getPosition();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 0: bush</span></div>
<div class="line">    <span class="comment">// 1: rock</span></div>
<div class="line">    <span class="comment">// 2: grass</span></div>
<div class="line">    uint8_t type;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The generated position will be stored here.</span></div>
<div class="line">    <span class="keywordtype">int</span> position;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Flag for collision event detection.</span></div>
<div class="line">    <span class="keywordtype">bool</span> collision;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Address of the previous obstacle in the buffer.</span></div>
<div class="line">    obstacle* previous = NULL;</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// An array of obstacles.</span></div>
<div class="line">obstacle obstacles[ NUMBER_OF_OBSTACLES ];</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// System init section.</span></div>
<div class="line"><span class="keywordtype">void</span> setup(){</div>
<div class="line"> </div>
<div class="line">    Serial.begin(115200);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generic counter variable.</span></div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Logo. Putting a lot of constants into an AVR is tricky.</span></div>
<div class="line">    <span class="comment">// I think all other platforms are storing const data in the FLASH,</span></div>
<div class="line">    <span class="comment">// but to make it happen with AVRs it is tricky. This is a quick and dirty</span></div>
<div class="line">    <span class="comment">// macro trick to save some RAM.</span></div>
<div class="line"><span class="preprocessor">    #ifdef __AVR__</span></div>
<div class="line">    __FlashStringHelper * logo = F(</div>
<div class="line">    #<span class="keywordflow">else</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* logo =</div>
<div class="line">    #endif</div>
<div class="line">        <span class="stringliteral">&quot;    _____        _                _____      _     _     \r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;   |  __ \\      (_)              / ____|    (_)   (_)    \r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;   | |  | |_   _ _ _ __   ___   | |     _ __ _ ___ _ ___ \r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;   | |  | | | | | | &#39;_ \\ / _ \\  | |    | &#39;__| / __| / __|\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;   | |__| | |_| | | | | | (_) | | |____| |  | \\__ \\ \\__ \\\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;   |_____/ \\__,_|_|_| |_|\\___/   \\_____|_|  |_|___/_|___/\r\n&quot;</span></div>
<div class="line">    #ifdef __AVR__</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">    ;</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Logo Text.</span></div>
<div class="line"><span class="preprocessor">    #ifdef __AVR__</span></div>
<div class="line">    __FlashStringHelper * gameText = F(</div>
<div class="line">    #<span class="keywordflow">else</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* gameText =</div>
<div class="line">    #endif</div>
<div class="line">        <span class="stringliteral">&quot;Created by: Daniel Hajnal 2023\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;This is a small game about a dinousaur, called Tibi.\r\nTibi is running fom a huge meteorite.\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Help him to run as far as possible.\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;This game is made to demonstrate an advanced use of Shellminator library.\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Controls:\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  Jump    - Up Arrow\r\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  Restart - Ctrl + C\r\n&quot;</span>  </div>
<div class="line">        <span class="stringliteral">&quot;If you avoid 5 obstacles in a row, yo will be rewarded with an extra life.\r\n&quot;</span></div>
<div class="line">    #ifdef __AVR__</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">    ;</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Clear the terminal</span></div>
<div class="line">    shell.clear();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Try to allocate memory for 100 characters.</span></div>
<div class="line">    <span class="keywordflow">if</span>( !shell.enableBuffering( 50 ) ){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If it fails, print the problem.</span></div>
<div class="line">        <span class="comment">// The error is handled internally, and it will still work, but without buffering.</span></div>
<div class="line">        Serial.println( <span class="stringliteral">&quot;Can not allocate memory for buffering!&quot;</span> );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Override the default behaviour of the abort and the up arrow key.</span></div>
<div class="line">    shell.overrideUpArrow( upArrowFunc );</div>
<div class="line">    shell.overrideAbortKey( abortKeyFunc );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Read the size of the terminal window in characters.</span></div>
<div class="line">    shell.getTerminalSize( &amp;width, &amp;height );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set cursor to top left</span></div>
<div class="line">    shell.setCursorPosition( 1, 1 );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print logo.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca2d794b8c9da571b5b4341783369f9b77">Shellminator::GREEN</a> );</div>
<div class="line">    Serial.println( logo );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print logo text.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca62b45018b699ec91423a076427c5ac33">Shellminator::WHITE</a> );</div>
<div class="line">    Serial.println( gameText );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate a select menu for difficulty selection.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca06f87b7120b76f108b0c1526f1d68731">Shellminator::YELLOW</a> );</div>
<div class="line">    difficulty = <a class="code hl_function" href="class_shellminator.html#abda51506ee9282323c3365bcb8d8a7cd">Shellminator::selectList</a>( &amp;Serial, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Please select difficulty:&quot;</span>, 3, difficultyList, 0 );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create some randomness based on the elapsed time.</span></div>
<div class="line">    randomSeed( millis() );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Calculate the runtime difficulty.</span></div>
<div class="line">    runtimeDifficulty = difficulty * 4;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Calculate player life based on difficulty.</span></div>
<div class="line">    playerLife = 3 + difficulty;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a circular parrenting list.</span></div>
<div class="line">    <span class="keywordflow">for</span>( i = 1; i &lt; NUMBER_OF_OBSTACLES; i++ ){</div>
<div class="line"> </div>
<div class="line">        obstacles[ i ].setPrevious( &amp;obstacles[ i - 1 ] );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The parrent of the first obstacle is the last obstacle, to make it circular.</span></div>
<div class="line">    obstacles[ 0 ].setPrevious( &amp;obstacles[ NUMBER_OF_OBSTACLES - 1 ] );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate the first obstacle manually.</span></div>
<div class="line">    obstacles[ 0 ].generateManual();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate the rest with the regular method.</span></div>
<div class="line">    <span class="keywordflow">for</span>( i = 1; i &lt; NUMBER_OF_OBSTACLES; i++ ){</div>
<div class="line">        obstacles[ i ].generate();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Infinite loop.</span></div>
<div class="line"><span class="keywordtype">void</span> loop(){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Increase the distance every iteration.</span></div>
<div class="line">        distance++;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Update the difficulty.</span></div>
<div class="line">        runtimeDifficulty = difficulty * 4 + distance / 250;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Overflow protection.</span></div>
<div class="line">        <span class="keywordflow">if</span>( runtimeDifficulty &gt; 11 ){</div>
<div class="line">            runtimeDifficulty = 11;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Update the terminal interface to parse key events.</span></div>
<div class="line">        shell.update();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Clear the terminal interface. It is necessary, to &#39;hide&#39; terminal messages.</span></div>
<div class="line">        shell.clear();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Draw the graphics.</span></div>
<div class="line">        drawTerrain();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Wait 75ms. If it is faster, it will flicker. It is around 13 FPS.</span></div>
<div class="line">        <span class="comment">// It runs better, than some games from 2022...</span></div>
<div class="line">        delay( 75 );</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> upArrowFunc(){</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Start the jump sequence only, when the jumpSequenceCntr is in reset state.</span></div>
<div class="line">  <span class="keywordflow">if</span>( jumpSequenceCntr == 0 ){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start the jump sequence.</span></div>
<div class="line">    jumpSequenceCntr = 1;</div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> abortKeyFunc(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Quick and dirty way of killing the player. This way the game over menu will appear.</span></div>
<div class="line">    playerLife = -10;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> drawTerrain(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generic counter variable.</span></div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Hide the cursor every at rendering cycle.</span></div>
<div class="line">    shell.hideCursor();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set color to white for gound.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653ae3429203ecb2b51c8e4d46f9c4d56a67">Shellminator::REGULAR</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca62b45018b699ec91423a076427c5ac33">Shellminator::WHITE</a> );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Draw the top of the floor</span></div>
<div class="line">    shell.setCursorPosition( 1, height - 2 );</div>
<div class="line">    <span class="keywordflow">for</span>( i = 0; i &lt; width; i++ ){</div>
<div class="line"> </div>
<div class="line">        Serial.print( <span class="charliteral">&#39;_&#39;</span> );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Draw the top ground pattern.</span></div>
<div class="line">    shell.setCursorPosition( 1, height - 1 );</div>
<div class="line">    <span class="keywordflow">for</span>( i = 0; i &lt; width; i++ ){</div>
<div class="line"> </div>
<div class="line">        Serial.print( terrainUp[ ( distance + i ) % terrainUpSize ] );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Draw the bottom ground pattern.</span></div>
<div class="line">    shell.setCursorPosition( 1, height );</div>
<div class="line">    <span class="keywordflow">for</span>( i = 0; i &lt; width; i++ ){</div>
<div class="line"> </div>
<div class="line">        Serial.print( terrainDown[ ( distance + i ) % terrainDownSize ] );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Draw the character</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca2d794b8c9da571b5b4341783369f9b77">Shellminator::GREEN</a> );</div>
<div class="line">    shell.setCursorPosition( 1, height - 6 - jumpSequence[ jumpSequenceCntr ] );</div>
<div class="line">    Serial.print( dinoRunningNormal[ ( distance % 2 ) == 0 ] );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Handle jumping state.</span></div>
<div class="line">        <span class="keywordflow">if</span>( jumpSequenceCntr &gt; 0 ){</div>
<div class="line"> </div>
<div class="line">        jumpSequenceCntr++;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Detect jump sequence finish event.</span></div>
<div class="line">        <span class="keywordflow">if</span>( jumpSequenceCntr &gt;= jumpSequenceSize ){</div>
<div class="line">            jumpSequenceCntr = 0;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print difficulty level.</span></div>
<div class="line">    shell.setCursorPosition( 1, 1 );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>( i = 0; i &lt; 12; i++ ){</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>( i &gt; runtimeDifficulty ){</div>
<div class="line">            Serial.print( <span class="stringliteral">&quot;-&quot;</span> );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span>{</div>
<div class="line">            Serial.print( <span class="stringliteral">&quot;#&quot;</span> );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    Serial.println();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print score.</span></div>
<div class="line">    Serial.print( <span class="stringliteral">&quot;Score: &quot;</span> );</div>
<div class="line">    Serial.println( distance );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print life.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca91afcef9367e9c6ef8a489e64b98c23e">Shellminator::RED</a> );</div>
<div class="line">    Serial.print( <span class="stringliteral">&quot; \u2665 &quot;</span> );</div>
<div class="line">    Serial.println( playerLife );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print obstacles.</span></div>
<div class="line">    <span class="keywordflow">for</span>( i = 0; i &lt; NUMBER_OF_OBSTACLES; i++ ){</div>
<div class="line"> </div>
<div class="line">        obstacles[ i ].draw();</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect game over.</span></div>
<div class="line">    <span class="keywordflow">if</span>( playerLife &lt;= 0 ){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Game Over</span></div>
<div class="line">        drawScore();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Create a circular parrenting list.</span></div>
<div class="line">        <span class="keywordflow">for</span>( i = 1; i &lt; NUMBER_OF_OBSTACLES; i++ ){</div>
<div class="line"> </div>
<div class="line">            obstacles[ i ].setPrevious( &amp;obstacles[ i - 1 ] );</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The parrent of the first obstacle is the last obstacle, to make it circular.</span></div>
<div class="line">        obstacles[ 0 ].setPrevious( &amp;obstacles[ NUMBER_OF_OBSTACLES - 1 ] );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Generate the first obstacle manually.</span></div>
<div class="line">        obstacles[ 0 ].generateManual();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Generate the rest with the regular method.</span></div>
<div class="line">        <span class="keywordflow">for</span>( i = 1; i &lt; NUMBER_OF_OBSTACLES; i++ ){</div>
<div class="line">            obstacles[ i ].generate();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">obstacle::obstacle(){</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> obstacle::generateManual(){</div>
<div class="line"> </div>
<div class="line">    collision = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// In case of manual generation, whe new position will be generated &#39;off-screen&#39;.</span></div>
<div class="line">    <span class="comment">// It would be ugly it it just appears on the middle of the screen.</span></div>
<div class="line">    position = distance + random(   width + difficultyList[ runtimeDifficulty ][ 0 ],</div>
<div class="line">                                    width + difficultyList[ runtimeDifficulty ][ 1 ] );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate a random type between 0 and 2.</span></div>
<div class="line">    type = random( 3 );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> obstacle::generate(){</div>
<div class="line"> </div>
<div class="line">    collision = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Position of the previous obstacle.</span></div>
<div class="line">    <span class="keywordtype">int</span> prevPosition;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Screen position of the previous obstacle.</span></div>
<div class="line">    <span class="keywordtype">int</span> prevScreenPos;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if the previous element is set.</span></div>
<div class="line">    <span class="comment">// We don&#39;t want to invoke a call fom NULL ptr.</span></div>
<div class="line">    <span class="comment">// Mama would be sad :(</span></div>
<div class="line">    <span class="keywordflow">if</span>( previous ){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get the position of the previous obstacle.</span></div>
<div class="line">        prevPosition = previous -&gt; getPosition();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Calculate the screen position of the previous obstacle.</span></div>
<div class="line">        prevScreenPos = prevPosition - distance ;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If the screen position is off screen, we have to generate the manual way.</span></div>
<div class="line">        <span class="keywordflow">if</span>( prevScreenPos &lt; 1 ){</div>
<div class="line">            generateManual();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Other case we just generate according to the current difficulty.</span></div>
<div class="line">        <span class="keywordflow">else</span>{</div>
<div class="line">            position = random(  prevPosition + difficultyList[ runtimeDifficulty ][ 0 ],</div>
<div class="line">                                prevPosition + difficultyList[ runtimeDifficulty ][ 1 ] );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generate a random type between 0 and 2.</span></div>
<div class="line">    type = random( 3 );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> obstacle::getPosition(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Return the current position.</span></div>
<div class="line">    <span class="keywordflow">return</span> position;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> obstacle::draw(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Generic counter.</span></div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Screen position of the obstacle.</span></div>
<div class="line">    <span class="keywordtype">int</span> screenPos;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// If the drawing still in negative state, this flag will be true.</span></div>
<div class="line">    <span class="comment">// If negative flag is false, that means we can draw because we are on screen.</span></div>
<div class="line">    <span class="keywordtype">bool</span> negative;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// If this flag is true, regeneration is needed.</span></div>
<div class="line">    <span class="keywordtype">bool</span> regenerate = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Calculate screen position.</span></div>
<div class="line">    screenPos = position - distance ;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Set negative flag to true by default.</span></div>
<div class="line">    negative = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Every obstacle is 5 characters long.</span></div>
<div class="line">    <span class="keywordflow">for</span>( i = screenPos; i &lt; ( screenPos + 5 ); i++ ){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Detect if the current character is off screen.</span></div>
<div class="line">        <span class="keywordflow">if</span>( i &lt; 1 ){</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// This case we can not draw it.</span></div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Detect negative to positive state transition event.</span></div>
<div class="line">        <span class="keywordflow">if</span>( negative ){</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// This case set the cursor position and clear the negative flag.</span></div>
<div class="line">            shell.setCursorPosition( i, height - 2 );</div>
<div class="line">            negative = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Draw if we are on screen.</span></div>
<div class="line">        <span class="keywordflow">if</span>( i &lt;= width ){</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// grass</span></div>
<div class="line">            <span class="keywordflow">if</span>( type == 2 ){</div>
<div class="line">                Serial.print( <span class="charliteral">&#39;|&#39;</span> );</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// rock</span></div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( type == 1 ){</div>
<div class="line">                Serial.print( rock[ i - screenPos ] );</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Bush</span></div>
<div class="line">            <span class="keywordflow">else</span>{</div>
<div class="line">                Serial.print( <span class="charliteral">&#39;^&#39;</span> );</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Reset the regenerate flag.</span></div>
<div class="line">        regenerate = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect if the player is hit the obstacle.</span></div>
<div class="line">    <span class="keywordflow">if</span>( ( screenPos &lt; 12 ) &amp;&amp; ( screenPos &gt; 2 ) &amp;&amp; ( jumpSequence[ jumpSequenceCntr ] &lt; 1 ) ){</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Player hit event detection.</span></div>
<div class="line">        <span class="keywordflow">if</span>( collision == <span class="keyword">false</span> ){</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// This case we have to decrease the life of the player, and reset the streak counter.</span></div>
<div class="line">            playerLife--;</div>
<div class="line">            streak = 0;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Set the flags.</span></div>
<div class="line">            collision = <span class="keyword">true</span>;</div>
<div class="line">            regenerate = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// If regenerate flag is set, we have to generate a new position for the obstacle.</span></div>
<div class="line">    <span class="keywordflow">if</span>( regenerate ){</div>
<div class="line"> </div>
<div class="line">        generate();</div>
<div class="line">        streak++;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Detect succesful streak.</span></div>
<div class="line">        <span class="keywordflow">if</span>( streak &gt;= 5 ){</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Increase players life and reset the streak counter.</span></div>
<div class="line">            playerLife++;</div>
<div class="line">            streak = 0;</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> obstacle::setPrevious( obstacle* prev ){</div>
<div class="line">    previous = prev;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> drawScore(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print game over text.</span></div>
<div class="line">    shell.setCursorPosition( 1, 1 );</div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca91afcef9367e9c6ef8a489e64b98c23e">Shellminator::RED</a> );</div>
<div class="line">    Serial.print( gameOverText );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Print score.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca2d794b8c9da571b5b4341783369f9b77">Shellminator::GREEN</a> );</div>
<div class="line">    Serial.println( distance );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create an option to change difficulty.</span></div>
<div class="line">    <a class="code hl_function" href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a>( &amp;Serial, <a class="code hl_enumvalue" href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a>, <a class="code hl_enumvalue" href="class_shellminator.html#a306653f230deb8b560058517a95830dca62b45018b699ec91423a076427c5ac33">Shellminator::WHITE</a> );</div>
<div class="line">    Serial.println( <span class="stringliteral">&quot;Press &#39;D&#39; to change difficulty,&quot;</span> );</div>
<div class="line">    Serial.println( <span class="stringliteral">&quot;or any other key to restart...&quot;</span> );</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code hl_function" href="class_shellminator.html#a2b2337f24347bbe8dcc0c02ebf55ffc2">Shellminator::waitForKey</a>( &amp;Serial, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;dD&quot;</span>, 0 ) ){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a select menu for difficulty change.</span></div>
<div class="line">        difficulty = <a class="code hl_function" href="class_shellminator.html#abda51506ee9282323c3365bcb8d8a7cd">Shellminator::selectList</a>( &amp;Serial, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;Please select difficulty:&quot;</span>, 3, difficultyList, 0 );</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Reset the game variables.</span></div>
<div class="line">    distance = 0;</div>
<div class="line">    playerLife = 3 + difficulty;</div>
<div class="line">    streak = 0;</div>
<div class="line">    randomSeed( millis() );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="a_shellminator-_i_o_8hpp_html"><div class="ttname"><a href="_shellminator-_i_o_8hpp.html">Shellminator-IO.hpp</a></div></div>
<div class="ttc" id="a_shellminator_8hpp_html"><div class="ttname"><a href="_shellminator_8hpp.html">Shellminator.hpp</a></div></div>
<div class="ttc" id="aclass_shellminator_html"><div class="ttname"><a href="class_shellminator.html">Shellminator</a></div><div class="ttdoc">Shellminator object.</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00116">Shellminator.hpp:117</a></div></div>
<div class="ttc" id="aclass_shellminator_html_a2b2337f24347bbe8dcc0c02ebf55ffc2"><div class="ttname"><a href="class_shellminator.html#a2b2337f24347bbe8dcc0c02ebf55ffc2">Shellminator::waitForKey</a></div><div class="ttdeci">static bool waitForKey(Stream *source, char key, uint32_t timeout=0)</div><div class="ttdoc">Wait for specific keypress.</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8cpp_source.html#l02203">Shellminator.cpp:2203</a></div></div>
<div class="ttc" id="aclass_shellminator_html_a306653f230deb8b560058517a95830dca06f87b7120b76f108b0c1526f1d68731"><div class="ttname"><a href="class_shellminator.html#a306653f230deb8b560058517a95830dca06f87b7120b76f108b0c1526f1d68731">Shellminator::YELLOW</a></div><div class="ttdeci">@ YELLOW</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00128">Shellminator.hpp:128</a></div></div>
<div class="ttc" id="aclass_shellminator_html_a306653f230deb8b560058517a95830dca2d794b8c9da571b5b4341783369f9b77"><div class="ttname"><a href="class_shellminator.html#a306653f230deb8b560058517a95830dca2d794b8c9da571b5b4341783369f9b77">Shellminator::GREEN</a></div><div class="ttdeci">@ GREEN</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00127">Shellminator.hpp:127</a></div></div>
<div class="ttc" id="aclass_shellminator_html_a306653f230deb8b560058517a95830dca62b45018b699ec91423a076427c5ac33"><div class="ttname"><a href="class_shellminator.html#a306653f230deb8b560058517a95830dca62b45018b699ec91423a076427c5ac33">Shellminator::WHITE</a></div><div class="ttdeci">@ WHITE</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00133">Shellminator.hpp:132</a></div></div>
<div class="ttc" id="aclass_shellminator_html_a306653f230deb8b560058517a95830dca91afcef9367e9c6ef8a489e64b98c23e"><div class="ttname"><a href="class_shellminator.html#a306653f230deb8b560058517a95830dca91afcef9367e9c6ef8a489e64b98c23e">Shellminator::RED</a></div><div class="ttdeci">@ RED</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00126">Shellminator.hpp:126</a></div></div>
<div class="ttc" id="aclass_shellminator_html_abda51506ee9282323c3365bcb8d8a7cd"><div class="ttname"><a href="class_shellminator.html#abda51506ee9282323c3365bcb8d8a7cd">Shellminator::selectList</a></div><div class="ttdeci">static int selectList(Stream *source, char *lineText, int numberOfElements, char *list[], uint32_t timeout, bool *selection=NULL)</div><div class="ttdoc">Select list.</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8cpp_source.html#l02386">Shellminator.cpp:2386</a></div></div>
<div class="ttc" id="aclass_shellminator_html_acdbd56dfa0dfb9dd509420d25d9c5cd9"><div class="ttname"><a href="class_shellminator.html#acdbd56dfa0dfb9dd509420d25d9c5cd9">Shellminator::setTerminalCharacterColor</a></div><div class="ttdeci">void setTerminalCharacterColor(uint8_t style, uint8_t color)</div><div class="ttdoc">Bring some color into your code.</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator-_styles_8cpp_source.html#l00036">Shellminator-Styles.cpp:36</a></div></div>
<div class="ttc" id="aclass_shellminator_html_aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99"><div class="ttname"><a href="class_shellminator.html#aed71921772c5914597df4e0367edf653a395dc532fbbb72a53d1737a38d4e1b99">Shellminator::BOLD</a></div><div class="ttdeci">@ BOLD</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00141">Shellminator.hpp:141</a></div></div>
<div class="ttc" id="aclass_shellminator_html_aed71921772c5914597df4e0367edf653ae3429203ecb2b51c8e4d46f9c4d56a67"><div class="ttname"><a href="class_shellminator.html#aed71921772c5914597df4e0367edf653ae3429203ecb2b51c8e4d46f9c4d56a67">Shellminator::REGULAR</a></div><div class="ttdeci">@ REGULAR</div><div class="ttdef"><b>Definition:</b> <a href="_shellminator_8hpp_source.html#l00140">Shellminator.hpp:140</a></div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <a title="PlatformIO" href="https://registry.platformio.org/libraries/dani007200964/Shellminator/">
        <img class="footer" src="platformio_logo.png" alt="PlatformIO" style="height:20px;width:auto;"/>
      </a> &nbsp;|&nbsp;
      <a title="Arduino" href="https://www.arduino.cc/reference/en/libraries/shellminator/">
        <img class="footer" src="arduino_logo.png" alt="Arduino" style="height:20px;width:auto;"/>
      </a> &nbsp;|&nbsp;
      <a title="Shellminator" href="https://github.com/dani007200964/Shellminator">
        <img class="footer" src="logo.svg" alt="Shellminator" style="height:20px;width:auto;"/>
      </a> &nbsp;|&nbsp;
      <a title="Daniel Hajnal" href="mailto: hajnal.daniel96@gmail.com"> &copy; 2020-2023 Daniel Hajnal </a> &nbsp;|&nbsp;
      <b>Shellminator V1.2.0</b> &nbsp;|&nbsp; Generated by:
      <a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" alt="doxygen"/>
      </a> on Sun Jun 25 2023
      <hr class="footer"/><address class="footer"><small>
        <a title="PlatformIO" href="https://registry.platformio.org/libraries/dani007200964/Shellminator/">
          <img class="footer" src="platformio_logo.png" alt="PlatformIO" style="height:20px;width:auto;"/>
        </a> &nbsp;|&nbsp;
        <a title="Arduino" href="https://www.arduino.cc/reference/en/libraries/shellminator/">
          <img class="footer" src="arduino_logo.png" alt="Arduino" style="height:20px;width:auto;"/>
        </a> &nbsp;|&nbsp;
        <a title="Shellminator" href="https://github.com/dani007200964/Shellminator">
          <img class="footer" src="logo.svg" alt="Shellminator" style="height:20px;width:auto;"/>
        </a> &nbsp;|&nbsp;
        <a title="Daniel Hajnal" href="mailto: hajnal.daniel96@gmail.com"> &copy; 2020-2023 Daniel Hajnal </a> &nbsp;|&nbsp;
        <b>Shellminator V1.2.0</b> &nbsp;|&nbsp; Generated by:
        <a href="http://www.doxygen.org/index.html">
          <img class="footer" src="doxygen.svg" alt="doxygen"/>
        </a> on Sun Jun 25 2023
      </small></address>
    </li>
  </ul>
</div>
</body>
</html>
